<head>
    <!-- ... -->
    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
  </head>
  <body>

    <h1 data-i18n="settings.title">
        <!--
        This field will automatically be filled by a translated string with key 'settings.title'.
        Read more about translations at Internationalization.
        -->
    </h1>
    <p data-i18n="settings.subtitle">
        <!--
        This field will also be translated
        -->
    </p>

    <fieldset>
        <legend>Govee API Key</legend>

        <div class="field row">
            <label for="username">Key</label>
            <input id="apikey" type="text" value="" />
        </div>
        <button id="save" class="right">Save key</button>
    </fieldset>


    <script type="text/javascript">

    // a method named 'onHomeyReady' must be present in your code
    function onHomeyReady( Homey ){

        // Tell Homey we're ready to be displayed
        Homey.ready();

        var keyElement = document.getElementById('apikey');
        var saveElement = document.getElementById('save');

        saveElement.addEventListener('click', function(e) {
          Homey.set('api_key', keyElement.value, function( err ){
            if( err ) return Homey.alert( err );
          });
        });

        Homey.get('api_key', function( err, key ) {
           if( err ) return Homey.alert( err );
           keyElement.value = key;
        });

    }
    </script>

</body>